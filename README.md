# Review Parser & Widget
---
–ü–∞—Ä—Å–µ—Ä –æ—Ç–∑—ã–≤–æ–≤ –∏–∑ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ –∏ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç —Å REST API –∏ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –≤–µ–±-–≤–∏–¥–∂–µ—Ç–æ–º –¥–ª—è —Å–∞–π—Ç–æ–≤.

---

## üéØ –û –ø—Ä–æ–µ–∫—Ç–µ
Review Parser & Widget ‚Äî —ç—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±–æ—Ä–∞ –æ—Ç–∑—ã–≤–æ–≤ —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º –∏ –∏—Ö –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —Å–∞–π—Ç–µ —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –≤–∏–¥–∂–µ—Ç.
–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–∑—ã–≤–æ–≤ –∏–∑ –í–ö –∏ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç
- üìÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –∫–∞–∂–¥—É—é –Ω–æ—á—å –≤ 03:00 + —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –ë–î
- üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram ‚Äî –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –∏ —Å—Ç–∞—Ç—É—Å–µ
- üé® –í—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –≤–∏–¥–∂–µ—Ç ‚Äî –≤–µ–±-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –ª—é–±–æ–≥–æ —Å–∞–π—Ç–∞
- üìä REST API ‚Äî –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ
- üê≥ Docker & CI/CD ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–æ, GitHub Actions –¥–ª—è –¥–µ–ø–ª–æ—è
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
### Backend
- Python 3.9 ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- FastAPI ‚Äî REST API —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- SQLAlchemy ‚Äî ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- SQLite ‚Äî –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- Selenium ‚Äî –≤–µ–±-—Å–∫—Ä–µ–π–ø–∏–Ω–≥
- APScheduler ‚Äî –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
- aiogram ‚Äî –±–æ—Ç Telegram –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### Frontend
- JavaScript ES6+ ‚Äî Web Components (custom elements)
- CSS3 ‚Äî –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- Shadow DOM ‚Äî –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è —Å—Ç–∏–ª–µ–π

### DevOps
- Docker & Docker Compose ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- Nginx ‚Äî –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ reverse proxy
- GitHub Actions ‚Äî CI/CD pipeline
- Let's Encrypt ‚Äî SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

---

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:
- Docker
- Git
- Python 3.9+ (–µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –±–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)

–î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞:
- –ê–∫–∫–∞—É–Ω—Ç –í–ö–æ–Ω—Ç–∞–∫—Ç–µ (–¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞)
- –ê–∫–∫–∞—É–Ω—Ç Telegram (–¥–ª—è –±–æ—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- URL'—ã –Ω–∞ –æ—Ç–∑—ã–≤—ã –≤ –í–ö –∏ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç–∞—Ö

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/al3eon/review-parser-widget.git
cd review-parser-widget
```

2. –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª

```bash
cp .env.example .env
```

3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env (—Å–º. —Ä–∞–∑–¥–µ–ª –Ω–∏–∂–µ)

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker Compose

```bash
docker compose up --build
```
 
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
```bash
docker compose ps
docker compose logs -f app
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
```text
# ===== –í–ö–æ–Ω—Ç–∞–∫—Ç–µ =====
VK_LOGIN=your_vk_phone_or_email
VK_PASSWORD=your_vk_password
VK_FIRST_PAGE=https://vk.com/your_first_page_url
VK_TARGET=https://vk.com/reviews_page_url

# ===== –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã =====
YA_TARGET=https://yandex.ru/maps/org/your_org_id/reviews/

# ===== –ü—Ä–æ–∫—Å–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) =====
PROXY_URL=http://your_proxy_server:port

# ===== Selenium =====
SELENIUM_URL=http://chrome:4444  # –î–ª—è Docker

# ===== Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è =====
TG_BOT_TOKEN=your_telegram_bot_token_here
TG_CHAT_ID=your_telegram_chat_id_here

# ===== CORS =====
ALLOWED_ORIGINS=https://yourdomain.com,http://localhost:3000
```

---

## üì° REST API

### Endpoints

---
GET /api/reviews

---

–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

```text
limit: int = 6          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 6)
offset: int = 0         # –°–º–µ—â–µ–Ω–∏–µ (–¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏)
source: str = None      # –ò—Å—Ç–æ—á–Ω–∏–∫: 'vk' –∏–ª–∏ 'yandex' (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ)
```
–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

```bash
curl "http://localhost:8000/api/reviews?limit=10&offset=0&source=vk"
```

–û—Ç–≤–µ—Ç (200):

```json
[
  {
    "id": 1,
    "author_name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
    "rating": 5,
    "text": "–û—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ! –í–∫—É—Å–Ω–∞—è –µ–¥–∞...",
    "date_custom": "15 –Ω–æ—è–±—Ä—è 2024",
    "avatar_filename": "https://...",
    "source": "vk"
  }
]
```
---

GET /api/reviews/stats

---

–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –æ—Ç–∑—ã–≤–æ–≤.

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

```bash
curl "http://localhost:8000/api/reviews/stats"
```
–û—Ç–≤–µ—Ç (200):

```json
{
  "total": 245,
  "vk": 120,
  "yandex": 125
}
```
---

GET /api/config/sources

---
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (—Å—Å—ã–ª–∫–∏ –Ω–∞ –æ—Ç–∑—ã–≤—ã, —Ü–≤–µ—Ç–∞, –∏–∫–æ–Ω–∫–∏).

**–û—Ç–≤–µ—Ç (200):**
```json
{
  "vk": {
    "url": "https://vk.com/reviews-",
    "color": "#0077FF",
    "iconPath": "/static/icons/vk.svg",
    "displayName": "–í–ö–æ–Ω—Ç–∞–∫—Ç–µ"
  },
  "yandex": {
    "url": "https://yandex.ru/maps/org/...",
    "color": "#FC3F1D",
    "iconPath": "/static/icons/yandex.svg",
    "displayName": "–Ø–Ω–¥–µ–∫—Å"
  }
}
```
**–í–∞–∂–Ω–æ:** –°—Å—ã–ª–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (`VK_TARGET`, `YA_TARGET`).

---

## üé® –í–∏–¥–∂–µ—Ç: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
–ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
–î–æ–±–∞–≤—å—Ç–µ –Ω–∞ –≤–∞—à —Å–∞–π—Ç:

```xml
<review-widget></review-widget>
<script src="https://yourdomain.com/static/widget.js" defer></script>
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ–±—ä–µ–∫—Ç–µ CONFIG –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ ReviewWidget.

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª app/static/widget.js –∏ –Ω–∞–π–¥–∏—Ç–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:

```js
this.CONFIG = {
    BASE_URL: 'https://yourdomain.com',            // ‚Üê –ó–∞–º–µ–Ω–∏ –Ω–∞ URL —Ç–≤–æ–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
    LIMIT: 6,                                      // ‚Üê –û—Ç–∑—ã–≤–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    DOTS_VISIBLE: 7,                              // ‚Üê –¢–æ—á–µ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (–Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö)
    DOT_STEP: 20,                                 // ‚Üê –†–∞–∑–º–µ—Ä —Ç–æ—á–∫–∏
    FILTERS_BACKGROUND: '#E2F2FF',               // ‚Üê –¶–≤–µ—Ç —Ñ–æ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤

    SOURCES: {}                                 // ‚Üê –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ api
};
```

–§–æ–Ω –≤—Å–µ–≥–æ –≤–∏–¥–∂–µ—Ç–∞:

```css
:host {
    background-color: #CCEAFF;  /* –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ü–≤–µ—Ç */
}
```

–ö–Ω–æ–ø–∫–∞ "–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤":
–í –º–µ—Ç–æ–¥–µ render() –Ω–∞–π–¥–∏—Ç–µ –∫–Ω–æ–ø–∫—É –∏ –∏–∑–º–µ–Ω–∏—Ç–µ —Å—Å—ã–ª–∫—É (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ø–Ω–¥–µ–∫—Å, —É–∫–∞–∑–∞–Ω–Ω–∞—è –≤ .env/YA_TARGET):

```js
<a href="${this.CONFIG.SOURCES.yandex.url}" target="_blank" class="rl-write-btn">
    –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
</a>
````
---

## üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
–í–∏–¥–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —ç–∫—Ä–∞–Ω–∞:

| –†–∞–∑–º–µ—Ä              | –í–∏–¥                | –ü–æ–≤–µ–¥–µ–Ω–∏–µ                     |
|---------------------|--------------------|-------------------------------|
| Desktop (>900px)    | –°–µ—Ç–∫–∞ 3√ó2          | –ö–Ω–æ–ø–∫–∞ "–ï—â—ë –æ—Ç–∑—ã–≤—ã"           |
| Tablet (600-900px)  | –°–µ—Ç–∫–∞ 2√ó2          | –ö–Ω–æ–ø–∫–∞ "–ï—â—ë –æ—Ç–∑—ã–≤—ã"           |
| Mobile (<600px)     | –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª | Infinite scroll, —Ç–æ—á–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ |


### –ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö:
- –û—Ç–∑—ã–≤—ã —Å–∫—Ä–æ–ª–ª—è—Ç—Å—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ
- –¢–æ—á–∫–∏ –≤–Ω–∏–∑—É –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –∫–∞–∫–æ–π –æ—Ç–∑—ã–≤ –≤ —Ñ–æ–∫—É—Å–µ
- –ö–Ω–æ–ø–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –∫ —Ä–∞–∑–º–µ—Ä—É —ç–∫—Ä–∞–Ω–∞

---

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:

```bash
ssh user@your_server_ip
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –∏ Docker Compose:
```bash
sudo apt-get install -y docker-compose-plugin
```

–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞:

```bash
mkdir -p ~/reviews
cd ~/reviews
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions (CI/CD)
1. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–ø–∫–∏:

```bash
cd ~/reviews
touch .env
mkdir -p data/db data/logs data/backups
```

2. –û—Ç–∫—Ä–æ–π—Ç–µ .env:

```bash
nano .env
```
–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è.

3. –í GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ:

- Settings ‚Üí Secrets and variables ‚Üí Actions

4. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã:

| –°–µ–∫—Ä–µ—Ç          | –û–ø–∏—Å–∞–Ω–∏–µ                  | –ü—Ä–∏–º–µ—Ä                          |
|-----------------|---------------------------|---------------------------------|
| DOCKER_USERNAME | –õ–æ–≥–∏–Ω DockerHub           | your_dockerhub_login            |
| DOCKER_PASSWORD | –ü–∞—Ä–æ–ª—å DockerHub          | dckr_pat_xxxxx                  |
| HOST             | IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞          | 192.168.1.100 –∏–ª–∏ example.com   |
| USER             | SSH –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ | root –∏–ª–∏ deploy                |
| SSH_KEY          | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á        | -----BEGIN RSA PRIVATE KEY-----... |
| TELEGRAM_TOKEN   | Telegram Bot Token        | 123456:ABCDefgh...              |
| TELEGRAM_TO      | Telegram Chat ID          | 987654321                       |

### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å SSH_KEY:

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–∞—Ä—É –∫–ª—é—á–µ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –¥–µ–ø–ª–æ—è
ssh-keygen -t rsa -b 4096 -f ~/.ssh/github_actions -N ""

# 2. –î–æ–±–∞–≤–ª—è–µ–º –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ (—á—Ç–æ–±—ã GitHub –º–æ–≥ –≤–æ–π—Ç–∏)
cat ~/.ssh/github_actions.pub >> ~/.ssh/authorized_keys

# 3. –í—ã–≤–æ–¥–∏–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–°–ö–û–ü–ò–†–û–í–ê–¢–¨ –í GITHUB SECRETS)
cat ~/.ssh/github_actions
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –≤—ã–≤–æ–¥ (–Ω–∞—á–∏–Ω–∞—è —Å -----BEGIN RSA PRIVATE KEY----- –¥–æ –∫–æ–Ω—Ü–∞) –≤ GitHub —Å–µ–∫—Ä–µ—Ç SSH_KEY.

### –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π
–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ push –≤ master GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –∫–æ–¥ (flake8)
- üì¶ –°–æ–±–∏—Ä–∞–µ—Ç Docker –æ–±—Ä–∞–∑
- üöÄ –ü—É—à–∏—Ç –Ω–∞ DockerHub
- üîó –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH
- üê≥ –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- üì≤ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram


---
## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ nginx (–æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø–æ—Ä—Ç 80 –¥–ª—è Certbot):
```bash
cd ~/reviews
docker compose -f docker-compose.production.yml stop nginx
```

2. –°—Ç–∞–≤–∏–º Certbot (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç):
```bash
sudo apt update
sudo apt install snapd -y
sudo snap install core; sudo snap refresh core
sudo snap install --classic certbot
sudo ln -s /snap/bin/certbot /usr/bin/certbot
```

3. –ü–æ–ª—É—á–∞–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç:
```bash
sudo certbot certonly --standalone -d your-domain-site
```

4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
docker compose -f docker-compose.production.yml up -d
```

---

### –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–∞—Ä—Å–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 03:00.

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

–í —Ñ–∞–π–ª–µ scraper/run_parser.py —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É:

```python
if __name__ == '__main__':
    run_parser_then_backup()  # ‚Üê –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É
    
    scheduler = BlockingScheduler(timezone='Europe/Moscow')
    random_minute = get_random_minute()
    scheduler.add_job(run_parser_then_backup, 'cron', hour=3, minute=random_minute)
    logger.info(f'–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø–∞—Ä—Å–µ—Ä–∞ –∑–∞–ø—É—â–µ–Ω. –ñ–¥—É 03:{random_minute}...')
    try:
        scheduler.start()
    except (KeyboardInterrupt, SystemExit):
        logger.info('–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.')
```
–ü–æ—Å–ª–µ git push –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç—Å—è –∏ –ø–∞—Ä—Å–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —Å—Ä–∞–∑—É. –í–µ—Ä–Ω—É—Ç—å –≤ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º: –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ run_all_parser() –æ–±—Ä–∞—Ç–Ω–æ.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–í–°–ï)
docker compose -f docker-compose.production.yml ps

# –°—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (backend)
docker compose -f docker-compose.production.yml logs -f backend

# –õ–æ–≥–∏ –ø–∞—Ä—Å–µ—Ä–∞
docker compose -f docker-compose.production.yml logs -f parser

# –õ–æ–≥–∏ Chrome/Selenium
docker compose -f docker-compose.production.yml logs -f chrome

# –õ–æ–≥–∏ Nginx
docker compose -f docker-compose.production.yml logs -f nginx

# –í—Å–µ –ª–æ–≥–∏
docker compose -f docker-compose.production.yml logs -f
```
–ß—Ç–æ–±—ã –≤—ã–π—Ç–∏ –∏–∑ –ª–æ–≥–æ–≤, –Ω–∞–∂–º–∏—Ç–µ `Ctrl + C`.

### –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –ë–î
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 03:00 –≤ –ø–∞–ø–∫–µ data/backups/.

–°–∫–∞—á–∞—Ç—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä:

```bash
scp user@your_server_ip:~/reviews/data/backups/*.db ./backups/
```


---

## üîÑ CI/CD Pipeline (GitHub Actions)
–ü—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ –≤–µ—Ç–∫—É master:

1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî flake8 –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
2. –°–±–æ—Ä–∫–∞ ‚Äî Docker –æ–±—Ä–∞–∑ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è
3. –ü—É—à ‚Äî –û–±—Ä–∞–∑ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–∞ DockerHub
4. –î–µ–ø–ª–æ–π ‚Äî SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
5. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ ‚Äî –°–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–±–µ–∑ Docker)
```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
cd review-parser-widget

# –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv
source venv/bin/activate  # –î–ª—è Windows: venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ FastAPI
uvicorn app.main:app --reload

# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ ‚Äî –ø–∞—Ä—Å–µ—Ä
python -m scraper.run_parser
```

---

## –ê–≤—Ç–æ—Ä
### **–ê–∑–∞—Ä–µ—Ç–æ–≤ –õ–µ–≤** ([GitHub](https://github.com/al3eon) | [Telegram](https://t.me/alieeon))
